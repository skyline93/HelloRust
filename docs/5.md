## äº”ã€åŸºæœ¬æ¦‚å¿µ

### 5.1ã€å˜é‡

å˜é‡ä½¿ç”¨ `let`å…³é”®å­—å®šä¹‰ï¼Œè€Œä¸”å˜é‡çš„å®šä¹‰å¿…é¡»èµ‹äºˆåˆå§‹å€¼ã€‚

#### 5.1.1ã€ä¸å¯å˜æ€§

æŸ¥çœ‹[ç¤ºä¾‹é¡¹ç›®](../code/4/variables/)å¦‚ä¸‹ä»£ç ï¼š

```rust
fn main() {
    let x = 5;                              // 1
    println!("The value of x is {}", x);

    x = 6;                                  // 2
    println!("The value of x is {}", x);
}
```

åˆ†æï¼š

1. å˜é‡ä½¿ç”¨å…³é”®å­— `let`å®šä¹‰ï¼›
2. å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚ä¸Šä»£ç ç¼–è¯‘å°†æŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š

```bash
$ cargo check
    Checking variables v0.1.0 (/workspace/hellorust/code/4/variables)
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:5:5
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
...
5 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable

For more information about this error, try `rustc --explain E0384`.
error: could not compile `variables` due to previous error
```

ğŸ’Œ***Tip:*** å˜é‡è¢«è®¾è®¡æˆä¸å¯å˜çš„åŸå› æœ‰å‡ ä¸ªæ–¹é¢çš„åŸå› ï¼š

* æœ‰æ—¶å€™ä»£ç é€»è¾‘ä¾èµ–ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼Œä¸€æ—¦å˜é‡å€¼å‘ç”Ÿå˜åŒ–ï¼Œå¾€å¾€å¾ˆéš¾è·Ÿè¸ªï¼›å°¤å…¶ä¿®æ”¹å˜é‡æ“ä½œä»…åœ¨æŸç§ç‰¹å®šæ¡ä»¶ä¸‹å‘ç”Ÿæ—¶ï¼›
* å½“ä½¿ç”¨ä¸€äº›é‡å‹çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨å¯å˜æ€§ä¿®æ”¹ä¸€ä¸ªå®ä¾‹å¯èƒ½æ¯”èµ‹å€¼å’Œè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹æ•ˆç‡è¦é«˜ã€‚ä¸ºä»€ä¹ˆâ“â“èµ‹å€¼å’Œä¿®æ”¹çš„åº•å±‚æ˜¯ä»€ä¹ˆåŒºåˆ«ï¼›
* å½“ä½¿ç”¨è¾ƒä¸ºè½»é‡çš„æ•°æ®ç»“æ„æ—¶ï¼Œé€šè¿‡åˆ›å»ºæ–°å˜é‡å¯èƒ½ä¼šä½¿ä»£ç æ›´åŠ æ˜“äºç†è§£ï¼›

#### 5.1.2ã€ å¯å˜æ€§

ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼Œå¢åŠ  `mut`å…³é”®å­—ä½¿å˜é‡å…·æœ‰å¯å˜æ€§ï¼Œå³å¯é€šè¿‡ç¼–è¯‘ï¼š

```rust
fn main() {
    let mut x = 5;                              // å˜é‡å‰å¢åŠ mutå…³é”®å­—ä½¿å˜é‡å…·æœ‰å¯å˜æ€§
    println!("The value of x is {}", x);

    x = 6;
    println!("The value of x is {}", x);
}
```

#### 5.1.3ã€éšè—

å¦‚ä¸Šè¿°ä»£ç ä¹Ÿå¯ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼Œå¯¹ä¸å¯å˜çš„å˜é‡xå†æ¬¡ä½¿ç”¨ `let`å…³é”®å­—å®šä¹‰ï¼Œç§°ä½œç¬¬ä¸€ä¸ªå˜é‡xè¢«ç¬¬äºŒä¸ªå˜é‡xéšè—äº†ï¼Œå¦‚ä¸‹ï¼š

```rust
fn main() {
    let x = 5;
    println!("The value of x is {}", x);

    let x = 6;                               // å°†xéšè—ï¼Œxçš„å€¼ä¸º6
    println!("The value of x is {}", x);
}
```

è¿™æ ·å¯¹å˜é‡æ‰§è¡Œå®Œä¸€ç³»åˆ—æ“ä½œåï¼Œå˜é‡xè¿˜ä¿æŒè‡ªèº«çš„ä¸å¯å˜æ€§ã€‚**ä½†æ˜¯è¦æ³¨æ„ï¼Œé‡å¤ä½¿ç”¨ `let`å…³é”®å­—å£°æ˜å˜é‡è™½ç„¶å˜é‡åä¸å˜ï¼Œå¾—åˆ°çš„ç¡®æ˜¯ä¸€ä¸ªå…¨æ–°çš„å˜é‡ï¼Œè€Œä¸”é€šè¿‡éšè—ï¼Œå¯ä»¥æ”¹å˜è¯¥å˜é‡çš„ç±»å‹**ï¼Œå¦‚ä¸‹ï¼š

```rust
let x = "abc";  // å˜é‡xæ˜¯å­—ç¬¦ä¸²ç±»å‹
let x = 1;       // å˜é‡xå˜æˆäº†æ•°å€¼
```

**è€Œå…·æœ‰å¯å˜æ€§çš„å˜é‡æ˜¯ä¸å…è®¸æ”¹å˜æ•°æ®ç±»å‹çš„**ï¼Œå¦‚ä¸‹æ“ä½œç¼–è¯‘å°†å¤±è´¥ï¼š

```rust
let mut x = "abc";  // å˜é‡xæ˜¯å­—ç¬¦ä¸²ç±»å‹
x = 1;               // å˜é‡xå˜æˆäº†æ•°å€¼
```

æŠ¥é”™å¦‚ä¸‹ï¼š

```bash
$ cargo run
   Compiling variables v0.1.0 (/workspace/hellorust/code/4/variables)
error[E0308]: mismatched types
  --> src/main.rs:27:9
   |
26 |     let mut x = "abc";  // å˜é‡xæ˜¯å­—ç¬¦ä¸²ç±»å‹
   |                 ----- expected due to this value
27 |     x = 1;               // å˜é‡xå˜æˆäº†æ•°å€¼
   |         ^ expected `&str`, found integer

For more information about this error, try `rustc --explain E0308`.
error: could not compile `variables` due to previous error
```

### 5.2ã€å¸¸é‡

ä½¿ç”¨ `const`å…³é”®å­—å®šä¹‰ä¸€ä¸ªå¸¸é‡

```rust
const MAX_POINTS: u32 = 100_000
```

ğŸŒˆä»£ç é£æ ¼ï¼š

* å¸¸é‡é€šå¸¸ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”çš„å…¨å¤§å†™å­—æ¯å‘½åï¼Œå¦‚æœæ˜¯æ•°å€¼ç±»å‹ï¼Œæ•°å€¼ä½¿ç”¨ä¸‹åˆ’çº¿æé«˜å¯è¯»æ€§ï¼›

ğŸ’Œ***Tip:*** å¸¸é‡å’Œä¸å¯å˜å˜é‡è™½ç„¶éƒ½æ— æ³•è¢«å…¶ä»–ä»£ç ä¿®æ”¹ï¼Œä½†å®ƒä»¬è¿˜æ˜¯å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼š

* å¸¸é‡ä¸ä»…é»˜è®¤ä¸å¯å˜ï¼Œè€Œä¸”æ€»æ˜¯ä¸å¯å˜ï¼›
* å¸¸é‡çš„å®šä¹‰ä½¿ç”¨ `const`å…³é”®å­—å®šä¹‰ï¼Œè€Œä¸”å¿…é¡»æ˜¾ç¤ºæŒ‡å®šå…¶æ•°æ®ç±»å‹ï¼›
* å¸¸é‡å¯ä»¥å£°æ˜åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸï¼›
* å¸¸é‡åªèƒ½åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œæ— æ³•å°†è¿è¡Œæ—¶çš„å€¼ç»‘å®šåˆ°å¸¸é‡ä¸Šã€‚

### 5.3ã€æ•°æ®ç±»å‹

rustçš„æ•°æ®ç±»å‹åŒ…æ‹¬**æ ‡é‡ç±»å‹**å’Œ**å¤åˆç±»å‹**

#### 5.3.1ã€æ•´æ•°ç±»å‹

æ•´æ•°ç±»å‹åŒ…æ‹¬æ— ç¬¦å·æ•´æ•°å’Œæœ‰ç¬¦å·æ•´æ•°


| é•¿åº¦   | æœ‰ç¬¦å· | æ— ç¬¦å· |
| -------- | -------- | -------- |
| 8-bit  | i8     | u8     |
| 16-bit | i16    | u16    |
| 32-bit | i32    | u32    |
| 64-bit | i64    | u64    |
| arch   | isize  | usize  |

æ•´æ•°å­—é¢é‡ä¸­ï¼Œé™¤äº†Byteï¼Œå…¶ä½™æ‰€æœ‰å­—é¢é‡éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹åç¼€


| æ•´æ•°å­—é¢é‡    | ç¤ºä¾‹        |
| --------------- | ------------- |
| Decimal       | 98_222      |
| Hex           | 0xff        |
| Octal         | 0o77        |
| Binary        | 0b1111_0000 |
| Byte(u8 only) | b'A'        |

***Tip:***

* isizeå’Œusizeä¸¤ç§ç‰¹æ®Šçš„æ•´æ•°ç±»å‹ï¼Œé•¿åº¦å–å†³äºç¨‹åºè¿è¡Œçš„ç›®æ ‡å¹³å°ã€‚64ä½æ¶æ„ä¸Šå°±æ˜¯64ä½ï¼Œ32ä½æ¶æ„ä¸Šå°±æ˜¯32ä½ã€‚
* æ•´æ•°å­—é¢é‡çš„é»˜è®¤æ¨å¯¼ç±»å‹æ˜¯i32ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿ç®—é€Ÿåº¦æœ€å¿«
* isizeå’Œusizeä¸»è¦ç”¨ä½œæŸäº›é›†åˆçš„ç´¢å¼•

### 5.3.2ã€æµ®ç‚¹æ•°ç±»å‹

æµ®ç‚¹æ•°ç±»å‹åŒ…æ‹¬ `f32`å’Œ `f64`ä¸¤ç§ï¼Œåˆ†åˆ«å ç”¨32ä½å’Œ64ä½ç©ºé—´ï¼Œæµ®ç‚¹æ•°å­—é¢é‡é»˜è®¤æ¨å¯¼ä½ `f64`ã€‚

```rust
fn main() {
  let x = 2.0;      // f64
  let y: f32 = 3.0  // f32
}
```

### 5.3.3ã€æ•°å€¼è¿ç®—

```rust
fn main() {
  let sum = 5 + 10;             // åŠ æ³•
  let difference = 95.5 - 4.3;  // å‡æ³•
  let product = 4 * 50;         // ä¹˜æ³•
  let quotient = 56.7 / 32.2;   // é™¤æ³•
  let remainder = 43 % 5;       // å–ä½™
}
```

***Tip:*** ä¸åŒç±»å‹çš„æ•°å€¼ä¸èƒ½è¿ç®—

### 5.3.4ã€å¸ƒå°”ç±»å‹

å¸ƒå°”ç±»å‹åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ `true`å’Œ `false`ï¼Œå®ƒä»¬åªå ç”¨å•ä¸ªå­—èŠ‚çš„ç©ºé—´

```rust
fn main() {
  let t = true;
  let f = false;

  let is_ok: bool = true;
}
```

### 5.3.5ã€å­—ç¬¦ç±»å‹

charç±»å‹å ç”¨4ä¸ªå­—èŠ‚ï¼Œæ˜¯ä¸€ä¸ª `Unicode`å€¼ï¼Œå¯ä»¥è¡¨ç¤ºæ¯”ASCIIå¤šå¾—å¤šçš„å­—ç¬¦å†…å®¹

```rust
fn main() {
  let c = 'z';
  let z = 'ğŸ˜»';
}
```

### 5.3.6ã€å…ƒç»„ç±»å‹

å…ƒç»„çš„å…ƒç´ å¯ä»¥ä¸ºä¸åŒç±»å‹ï¼Œé•¿åº¦æ˜¯å›ºå®šçš„

```rust
let t = (500, 6.4, 2, 'c');
println!("t: {}, {}, {}, {}", t.0, t.1, t.2, t.3);  // ä½¿ç”¨ç‚¹å·è®¿é—®ç´¢å¼•ä¸‹æ ‡

let t: (u32, f64, u8, char) = (500, 6.4, 2, 'c');
println!("t: {}, {}, {}, {}", t.0, t.1, t.2, t.3);

let (a, b, c, d) = t;       // è§£æ„
println!("t: {}, {}, {}, {}", a, b, c, d);

// t.0 = 200;  // tæ˜¯ä¸å¯å˜çš„
// println!("t: {}, {}, {}, {}", t.0, t.1, t.2, t.3);

let mut x = (500, 6.4, 2, 'c');
println!("x: {}, {}, {}, {}", x.0, x.1, x.2, x.3);

x.0 = 200;
println!("x: {}, {}, {}, {}", x.0, x.1, x.2, x.3);

// x.3 = 5; // ä¸åŒç±»å‹ä¸å…è®¸èµ‹ä¸åŒç±»å‹çš„å€¼
// println!("x: {}, {}, {}, {}", x.0, x.1, x.2, x.3);
```

### 5.3.7ã€æ•°ç»„ç±»å‹

æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œå¹¶ä¸”é•¿åº¦æ˜¯å›ºå®šçš„ã€‚ï¼ˆåŠ¨æ€æ•°ç»„ä¾‹å¤–ï¼Œå®ƒå…è®¸è°ƒæ•´é•¿åº¦ï¼‰

```rust
let a = [1, 2, 3, 4, 5];
println!("a: {}, {}, {}, {}, {}", a[0], a[1], a[2], a[3], a[4]); // ä½¿ç”¨æ–¹æ‹¬å·è®¿é—®ç´¢å¼•ä¸‹æ ‡

let a: [i32; 5] = [1, 2, 3, 4, 5];
println!("a: {}, {}, {}, {}, {}", a[0], a[1], a[2], a[3], a[4]);

let a = [3; 5];
println!("a: {}, {}, {}, {}, {}", a[0], a[1], a[2], a[3], a[4]);

let a = ['b'; 5];
println!("a: {}, {}, {}, {}, {}", a[0], a[1], a[2], a[3], a[4]);

let b = [1,2,3,4,5];
let index = 8;
let element = b[index]; // è¿™é‡Œç´¢å¼•è¶Šç•Œäº†ï¼Œä½†æ˜¯cargo checkæ—¶ä¸ä¼šæŠ¥é”™ï¼Œåœ¨è¿è¡Œæ—¶æ‰å‘ç”Ÿpanicä½¿ç¨‹åºå´©æºƒ
println!("element: {}", element);
```

### 5.4ã€å‡½æ•°

å‡½æ•°ä»¥ `fn`å…³é”®å­—å¼€å¤´ï¼Œå‡½æ•°åä½¿ç”¨ `è›‡å½¢å‘½åæ³•`ï¼ˆåªä½¿ç”¨å°å†™å­—æ¯ï¼Œä»¥ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼‰ã€‚

```rust
fn main() {
  println!("Hello, world!");

  another_function();
}

fn another_function() {
  println!("Another function.");
}
```

#### 5.4.1ã€å‡½æ•°å‚æ•°

å‡½æ•°å‚æ•°åˆ†ä¸ºå‚æ•°å˜é‡(parameter)å’Œä¼ å…¥çš„å…·ä½“å‚æ•°(argument)ï¼Œå‚æ•°å˜é‡å¿…é¡»æ˜¾ç¤ºå£°æ˜æ•°æ®ç±»å‹ï¼›å¤šä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ï¼Œä½¿ç”¨é€—å·éš”å¼€ã€‚

```rust
fn another_function(x: i32) {
  println!("The value of x is {}", x);
}
```

### 5.4.2ã€å‡½æ•°ä½“ä¸­çš„è¯­å¥å’Œè¡¨è¾¾å¼

rustä¸­è¯­å¥å’Œè¡¨è¾¾å¼åŒºåˆ«ä¸ºä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚

* è¯­å¥æŒ‡é‚£äº›æ‰§è¡Œæ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ï¼›
* è¡¨è¾¾å¼æŒ‡ä¼šè¿›è¡Œè®¡ç®—å¹¶äº§ç”Ÿå€¼çš„ç»“æœçš„æŒ‡ä»¤ï¼›

```rust
fn main() {
  let x = 5;
  println!("x: {}", x);
  
  let y = {     // æ‹¬å·æ‹¬èµ·æ¥çš„ä¸ºä»£ç å—
    let x = 3;  // è¯­å¥
    x + 1       // è¡¨è¾¾å¼ï¼Œæ­¤å¤„æœ«å°¾å¦‚æœåŠ å…¥äº†åˆ†å·ï¼Œåˆ™è¿™ä¸ªä»£ç å—ä¸è¿”å›å€¼
  };

  println!("The value of y is: {}", y);
}
```

### 5.4.3ã€è¿”å›å€¼

è¿”å›å€¼åœ¨å‡½æ•°åé¢ä½¿ç”¨ `->`æŒ‡å®šå…·ä½“ç±»å‹ï¼Œå¦‚ä¸‹å®šä¹‰éƒ½æ˜¯æ­£ç¡®çš„

```rust
fn func3() -> u8 {
    255;
    254
}

fn func4() -> (u8, char) {
    (127, 'c');
    return (126, 'd');
}
```

## 5.5ã€æ³¨é‡Š

rustçš„æ³¨é‡Šä½¿ç”¨åŒæ–œçº¿ `//`ï¼Œå¤šè¡Œä¹Ÿéœ€è¦ä½¿ç”¨ `//`

```rust
// Hello World
// let a = 1;
```

## 5.6ã€ifè¡¨è¾¾å¼

```rust
if number > 5 {
        println!("condition was true");
    } else if number == 0 {
        println!("number is zero");
    }
    else {
        println!("condition was false");
    }

    if number != 0 {
        println!("number is not zero");
    }
```

ç”±äºifæ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒæ˜¯æœ‰è¿”å›å€¼çš„ï¼Œå¦‚ä¸‹ä»£ç ï¼š

```rust
fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };
    println!("number: {}", number);
}
```

***Tip:*** ifè¡¨è¾¾å¼ä¸­è¿”å›å€¼çš„ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„

## 5.7ã€å¾ªç¯è¡¨è¾¾å¼

loopå¾ªç¯

```rust
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;      // ç”±äºbreakæ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™é‡Œçš„åˆ†å·å¯æœ‰å¯æ— 
        }
    };

    println!("counter: {}", result)
```

whileå¾ªç¯

```rust
    let mut number = 3;
  
    while number != 0 {
        println!("{}!", number);
  
        number = number - 1;
    }

    println!("LIFTOFF!!!");
```

forå¾ªç¯

```rust
    let a = [10, 20, 30, 40, 50, 60];

    for i in a.iter() {
        println!("the value is {}", i);
    }
```

â˜ï¸ä¸Šä¸€èŠ‚ï¼š[å››ã€çŒœå­—æ¸¸æˆ](4.md)
ğŸ‘‡ä¸‹ä¸€èŠ‚ï¼šå¾…æ›´æ–°

ğŸ¤[é¦–é¡µ](../README.md)
